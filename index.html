<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTUITION QUIZ</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: #000;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 600px;
            background-color: #111;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }
        
        h1, h2, h3 {
            font-weight: 600;
            letter-spacing: -0.5px;
        }
        
        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 20px;
        }
        
        .start-screen h1 {
            margin-bottom: 15px;
            font-size: 2.5rem;
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .start-screen p {
            margin-bottom: 30px;
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .name-input {
            margin: 30px 0;
        }
        
        .name-input input {
            width: 100%;
            padding: 15px;
            background: #222;
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 1rem;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }
        
        .name-input input:focus {
            background: #333;
        }
        
        /* Game Screen */
        .game-screen {
            display: none;
        }
        
        .player-name {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: #aaa;
            letter-spacing: 1px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .header > div {
            flex: 1;
            min-width: 100px;
            text-align: center;
        }
        
        .question-number {
            margin-bottom: 10px;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .option {
            background: #222;
            border: none;
            color: #fff;
            padding: 16px;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .option:hover {
            background: #2a2a2a;
            transform: translateY(-2px);
        }
        
        .option.correct {
            background: #2e7d32;
            color: white;
        }
        
        .option.incorrect {
            background: #c62828;
            color: white;
        }
        
        .option.correct-answer {
            background: #2e7d32;
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .explanation {
            padding: 16px;
            margin-top: 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #4e54c8;
        }
        
        .progress-container {
            margin-top: 30px;
        }
        
        .progress-bar {
            height: 4px;
            background-color: #222;
            border-radius: 2px;
            margin-bottom: 5px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            width: 0%;
            transition: width 0.5s;
        }
        
        /* Game Over Screen */
        .game-over {
            text-align: center;
            display: none;
        }
        
        .game-over h1 {
            margin-bottom: 15px;
            font-size: 2rem;
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .final-score {
            font-size: 2.5rem;
            margin: 25px 0;
            font-weight: 600;
        }
        
        .btn {
            background: #222;
            color: #fff;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            margin: 10px;
            font-weight: 500;
        }
        
        .btn:hover {
            background: #333;
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            color: #000;
            font-weight: 600;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 201, 255, 0.3);
        }

        .btn-twitter {
            background: #1DA1F2;
            color: white;
            font-weight: 600;
        }
        
        .btn-twitter:hover {
            background: #1a8cd8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(29, 161, 242, 0.3);
        }
        
        /* Results Card */
        .results-card {
            display: none;
            background: linear-gradient(135deg, #121212 0%, #000 100%);
            color: #fff;
            border-radius: 16px;
            padding: 30px;
            width: 100%;
            margin: 30px auto;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .results-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 201, 255, 0.1) 0%, transparent 70%);
            z-index: 0;
        }
        
        .results-card-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        
        .results-card h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .results-card .player-name {
            font-size: 1.3rem;
            margin: 15px 0;
            color: #fff;
            font-weight: 500;
            letter-spacing: 1px;
        }
        
        .results-card .score {
            font-size: 3rem;
            margin: 20px 0;
            font-weight: 700;
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .results-card .iq-level {
            font-size: 1.5rem;
            margin: 20px 0;
            font-weight: 600;
            padding: 8px 20px;
            border-radius: 50px;
            display: inline-block;
        }
        
        .results-card .message {
            margin: 20px 0;
            font-size: 1rem;
            line-height: 1.6;
            color: #ddd;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        
        .results-card .date {
            margin-top: 20px;
            color: #777;
            font-size: 0.9rem;
        }
        
        .results-card .watermark {
            position: absolute;
            bottom: 15px;
            right: 20px;
            color: rgba(255, 255, 255, 0.2);
            font-size: 0.8rem;
            font-weight: 300;
        }
        
        .results-card .decoration {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 201, 255, 0.1) 0%, transparent 70%);
        }
        
        .decoration-1 {
            top: -50px;
            right: -50px;
        }
        
        .decoration-2 {
            bottom: -50px;
            left: -50px;
            background: radial-gradient(circle, rgba(146, 254, 157, 0.1) 0%, transparent 70%);
        }

        .results-card .difficulty {
            margin: 10px 0;
            font-size: 1rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .results-card .stats {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            width: 100%;
        }

        .results-card .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            min-width: 100px;
            flex: 1;
        }

        .results-card .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .results-card .stat-label {
            font-size: 0.8rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Quiz Settings */
        .quiz-settings {
            margin: 30px 0;
        }

        .setting-group {
            margin-bottom: 25px;
        }

        .setting-group h3 {
            margin-bottom: 15px;
            color: #aaa;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .setting-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .setting-option {
            background: #222;
            border: 2px solid transparent;
            color: #fff;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
            flex: 1;
            min-width: 120px;
        }

        .setting-option:hover {
            background: #2a2a2a;
        }

        .setting-option.selected {
            background: linear-gradient(90deg, #00C9FF 0%, #92FE9D 100%);
            color: #000;
            font-weight: 600;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .difficulty-label {
            display: inline-block;
            margin-top: 5px;
            font-size: 0.8rem;
            color: #777;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }
            
            .start-screen h1 {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .option {
                padding: 14px;
            }
            
            .results-card {
                padding: 25px;
            }
            
            .results-card h2 {
                font-size: 1.6rem;
            }
            
            .results-card .score {
                font-size: 2.5rem;
            }

            .results-card .iq-level {
                font-size: 1.3rem;
            }

            .results-card .message {
                font-size: 0.95rem;
            }

            .setting-option {
                padding: 10px 15px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .container {
                padding: 20px;
            }
            
            .start-screen h1 {
                font-size: 1.8rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .final-score {
                font-size: 2rem;
            }
            
            .btn {
                padding: 12px 20px;
                margin: 8px;
                width: 100%;
            }
            
            .results-card {
                padding: 20px 15px;
            }
            
            .results-card h2 {
                font-size: 1.4rem;
            }
            
            .results-card .score {
                font-size: 2rem;
            }
            
            .results-card .iq-level {
                font-size: 1.2rem;
            }

            .results-card .message {
                font-size: 0.9rem;
            }

            .stat-value {
                font-size: 1.3rem !important;
            }

            .setting-option {
                min-width: 100%;
            }
        }

        /* Download Container Styles */
        #download-container {
            position: fixed;
            top: -10000px;
            left: -10000px;
            width: 800px;
            height: 450px;
            z-index: -1000;
            opacity: 0;
            margin-bottom: 50px;
        }
        
        #download-card {
            width: 800px;
            height: 450px;
            background: linear-gradient(145deg, #0a0a0a 0%, #000000 100%);
            color: #fff;
            border-radius: 24px;
            padding: 40px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Inter', sans-serif;
        }
        
        #download-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 70% 30%, rgba(0, 201, 255, 0.08) 0%, transparent 60%),
                        radial-gradient(circle at 30% 70%, rgba(146, 254, 157, 0.08) 0%, transparent 60%);
            z-index: 0;
        }
        
        #download-card .card-header {
            position: relative;
            z-index: 1;
            text-align: center;
            margin-bottom: 15px;
        }
        
        #download-card .card-header h2 {
            background: linear-gradient(135deg, rgba(0, 201, 255, 0.2) 0%, rgba(0, 102, 255, 0.2) 100%);
            color: #00C9FF;
            border: 1px solid rgba(0, 201, 255, 0.3);
            padding: 12px 24px;
            border-radius: 50px;
            display: inline-block;
            font-size: 1.8rem;
            margin: 10px 0;
        }
        
        #download-card .player-info {
            position: relative;
            z-index: 1;
            text-align: center;
            margin-bottom: 10px;
        }
        
        #download-card .player-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
            margin: 5px 0;
            letter-spacing: 0.5px;
        }
        
        #download-card .difficulty {
            font-size: 0.8rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin: 5px 0;
        }
        
        #download-card .score-display {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
        }
        
        #download-card .percentage-circle {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 10px 0;
            background: conic-gradient(#00C9FF var(--percentage), #333 var(--percentage));
        }

        #download-card .percentage-text {
            font-size: 2rem;
            font-weight: 700;
            color: #fff;
        }

        #download-card .percentage-symbol {
            font-size: 1.2rem;
            position: relative;
            top: -8px;
            color: #fff;
        }
        
        #download-card .iq-level {
            font-size: 1.2rem;
            font-weight: 600;
            padding: 8px 20px;
            border-radius: 50px;
            margin: 5px 0 15px 0;
        }
        
        #download-card .stats-container {
            position: relative;
            width: 100%;
            margin: 15px 0;
            padding: 20px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }
        
        #download-card .stats {
            display: flex;
            justify-content: center;
            gap: 12px;
            position: relative;
            z-index: 1;
        }
        
        #download-card .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 10px;
            min-width: 90px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        #download-card .stat-value {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: #fff;
        }
        
        #download-card .stat-label {
            font-size: 0.7rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #download-card .card-message {
            position: relative;
            z-index: 1;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #ddd;
            max-width: 600px;
            text-align: center;
            margin: 15px 0;
            padding: 0 20px;
        }
        
        #download-card .footer {
            position: relative;
            z-index: 1;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            width: 100%;
            align-items: center;
        }
        
        #download-card .date {
            color: #777;
            font-size: 0.7rem;
        }
        
        #download-card .watermark {
            color: rgba(255, 255, 255, 0.1);
            font-size: 0.7rem;
            font-weight: 300;
        }

        /* IQ Level Specific Styles */
        #download-card .iq-level.high {
            background: linear-gradient(135deg, rgba(0, 201, 255, 0.2) 0%, rgba(0, 102, 255, 0.2) 100%);
            color: #00C9FF;
            border: 1px solid rgba(0, 201, 255, 0.3);
        }
        
        #download-card .iq-level.mid {
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        #download-card .iq-level.low {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(198, 40, 40, 0.2) 100%);
            color: #ff6b6b;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="start-screen" class="start-screen">
            <h1>INTUITION QUIZ</h1>
            <p>Test your gut feeling about Intuition</p>
            <div class="name-input">
                <input type="text" id="player-name" placeholder="ENTER YOUR NAME" maxlength="20">
            </div>
            
            <div class="quiz-settings">
                <div class="setting-group">
                    <h3>Number of Questions</h3>
                    <div class="setting-options">
                        <div class="setting-option selected" data-questions="10">10 Questions</div>
                        <div class="setting-option" data-questions="20">20 Questions</div>
                        <div class="setting-option" data-questions="50">50 Questions</div>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>Difficulty Level</h3>
                    <div class="setting-options">
                        <div class="setting-option selected" data-difficulty="easy" data-time="20">
                            Easy
                            <div class="difficulty-label">20 seconds per question</div>
                        </div>
                        <div class="setting-option" data-difficulty="medium" data-time="10">
                            Medium
                            <div class="difficulty-label">10 seconds per question</div>
                        </div>
                        <div class="setting-option" data-difficulty="hard" data-time="5">
                            Hard
                            <div class="difficulty-label">5 seconds per question</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary" id="start-btn">Begin</button>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="game-screen">
            <div class="player-name" id="display-player-name"></div>
            <div class="header">
                <div class="score">Score: <span id="score">0</span>%</div>
                <div class="streak">Streak: <span id="streak">0</span></div>
                <div class="timer" id="timer">Time: <span>15</span>s</div>
            </div>
            
            <div class="question-number">Question <span id="current-question">1</span>/<span id="total-questions">10</span></div>
            <div class="question-text" id="question-text"></div>
            
            <div class="options" id="options"></div>
            
            <div class="explanation" id="explanation"></div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
            </div>
        </div>
        
        <!-- Game Over Screen -->
        <div id="game-over" class="game-over">
            <h1>Quiz Complete</h1>
            <div class="player-name" id="end-player-name"></div>
            
            <div id="results-card" class="results-card">
                <div class="decoration decoration-1"></div>
                <div class="decoration decoration-2"></div>
                <div class="results-card-content">
                    <h2>INTUITION QUIZ RESULTS</h2>
                    <div class="player-name" id="card-player-name"></div>
                    <div class="difficulty" id="card-difficulty"></div>
                    
                    <div class="percentage-circle" id="percentage-circle">
                        <span class="percentage-text" id="percentage-text">0</span>
                        <span class="percentage-symbol">%</span>
                    </div>
                    
                    <div class="iq-level" id="iq-level"></div>
                    
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value" id="stat-questions"></div>
                            <div class="stat-label">Questions</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-time"></div>
                            <div class="stat-label">Time Per Q</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-streak"></div>
                            <div class="stat-label">Max Streak</div>
                        </div>
                    </div>
                    
                    <div class="message" id="card-message"></div>
                    <div class="date" id="card-date"></div>
                    <div class="watermark">Intuition Quiz</div>
                </div>
            </div>
            
            <button class="btn" id="restart-btn">Try Again</button>
            <button class="btn btn-primary" id="download-btn">Download Results</button>
            <button class="btn btn-twitter" id="share-btn">Share on X</button>
        </div>
    </div>

    <!-- Hidden download container -->
    <div id="download-container">
        <div id="download-card">
            <div class="card-header">
                <h2>INTUITION QUIZ RESULTS</h2>
            </div>
            
            <div class="player-info">
                <div class="player-name" id="download-player-name"></div>
                <div class="difficulty" id="download-difficulty"></div>
            </div>
            
            <div class="score-display">
                <div class="percentage-circle" id="download-percentage-circle">
                    <span class="percentage-text" id="download-percentage-text">0</span>
                    <span class="percentage-symbol">%</span>
                </div>
                <div class="iq-level" id="download-iq-level"></div>
            </div>
            
            <div class="stats-container">
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="download-stat-questions"></div>
                        <div class="stat-label">Questions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="download-stat-time"></div>
                        <div class="stat-label">Time Per Q</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="download-stat-streak"></div>
                        <div class="stat-label">Max Streak</div>
                    </div>
                </div>
            </div>
            
            <div class="card-message" id="download-card-message"></div>
            
            <div class="footer">
                <div class="date" id="download-date"></div>
                <div class="watermark">Intuition Quiz</div>
            </div>
        </div>
    </div>

    <script>
        // All 300 questions with explanations
        const allQuestions = [
            {
                text: "What does the Trust Score in Intuition indicate?",
                options: [
                    { text: "A system to determine credibility", correct: true },
                    { text: "A vote counter", correct: false },
                    { text: "A user rating", correct: false }
                ],
                explanation: "The Trust Score is a system to determine the credibility of claims based on community validation."
            },
            {
                text: "How many backers does a claim need to be considered strong?",
                options: [
                    { text: "1", correct: false },
                    { text: "3", correct: false },
                    { text: "5", correct: true }
                ],
                explanation: "A claim needs 5 backers to be considered strong in the Intuition system."
            },
            {
                text: "What is a bonding curve used for in Intuition?",
                options: [
                    { text: "To visualize trust", correct: false },
                    { text: "To fund data speculation", correct: true },
                    { text: "To rate users", correct: false }
                ],
                explanation: "Bonding curves are used to fund data speculation in the Intuition ecosystem."
            },
            {
                text: "Which of the following is a key feature of Intuition?",
                options: [
                    { text: "Decentralized gaming", correct: false },
                    { text: "Decentralized claims & reputation", correct: true },
                    { text: "Online banking", correct: false }
                ],
                explanation: "Intuition's key feature is its decentralized claims and reputation system."
            },
            {
                text: "In Intuition, what role do Intuits play?",
                options: [
                    { text: "Submit claims", correct: true },
                    { text: "Back bad data", correct: false },
                    { text: "Refute all claims", correct: false }
                ],
                explanation: "Intuits are participants who submit claims to the network."
            },
            {
                text: "Why are ZK proofs important in Intuition's design?",
                options: [
                    { text: "Ensure privacy", correct: true },
                    { text: "Speed up transactions", correct: false },
                    { text: "Confuse users", correct: false }
                ],
                explanation: "Zero-knowledge proofs help ensure privacy in Intuition's design."
            },
            {
                text: "What type of data structure does a claim in Intuition use?",
                options: [
                    { text: "Triple (subject, predicate, object)", correct: true },
                    { text: "Single strings", correct: false },
                    { text: "Hash tables", correct: false }
                ],
                explanation: "Claims in Intuition use a triple structure of subject, predicate, and object."
            },
            {
                text: "Which mechanism does Intuition use to reach consensus?",
                options: [
                    { text: "Proof of Work", correct: false },
                    { text: "Voting", correct: false },
                    { text: "Intent-based consensus", correct: true }
                ],
                explanation: "Intuition uses intent-based consensus to validate claims."
            },
            {
                text: "Where can you find the reputation of a backer?",
                options: [
                    { text: "In their wallet address", correct: false },
                    { text: "In TripleStats", correct: true },
                    { text: "In the blockchain logs", correct: false }
                ],
                explanation: "Backer reputation can be found in TripleStats."
            },
            {
                text: "What does a high trust score suggest about a claim?",
                options: [
                    { text: "Low reliability", correct: false },
                    { text: "High agreement among Intuits", correct: true },
                    { text: "Spam", correct: false }
                ],
                explanation: "A high trust score indicates strong agreement among Intuits about the claim's validity."
            },
            {
                text: "What technology is used to write queries in Intuition's API?",
                options: [
                    { text: "SQL", correct: false },
                    { text: "GraphQL", correct: true },
                    { text: "REST", correct: false }
                ],
                explanation: "Intuition's API uses GraphQL for writing queries."
            },
            {
                text: "Why is decentralization important for Intuition?",
                options: [
                    { text: "For central authority", correct: false },
                    { text: "For transparency and resilience", correct: true },
                    { text: "To make things complex", correct: false }
                ],
                explanation: "Decentralization provides transparency and resilience to the Intuition network."
            },
            {
                text: "What information is usually part of a claim triple?",
                options: [
                    { text: "Backer wallet address", correct: false },
                    { text: "Timestamp", correct: false },
                    { text: "Subject, predicate, object", correct: true }
                ],
                explanation: "A claim triple consists of subject, predicate, and object."
            },
            {
                text: "What is one reason to back a claim on Intuition?",
                options: [
                    { text: "To earn rewards", correct: true },
                    { text: "To support false claims", correct: false },
                    { text: "To spam the network", correct: false }
                ],
                explanation: "Participants can earn rewards by backing valid claims."
            },
            {
                text: "Which best describes Intuition's mission?",
                options: [
                    { text: "Crowd-sourced truth layer", correct: true },
                    { text: "Blockchain payments", correct: false },
                    { text: "Web scraping", correct: false }
                ],
                explanation: "Intuition aims to be a crowd-sourced truth layer for the internet."
            },
            // Add more questions here to reach 300
            // ... (additional questions would be added in a real implementation)
        ];

        // Game state
        let currentQuestion = 0;
        let correctAnswers = 0;
        let streak = 0;
        let maxStreak = 0;
        let timeLeft = 15;
        let timer;
        let gameActive = true;
        let playerName = "";
        let questions = [];
        let quizSettings = {
            questionCount: 10,
            difficulty: "easy",
            timePerQuestion: 20
        };

        // DOM elements
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options');
        const explanationDiv = document.getElementById('explanation');
        const scoreSpan = document.getElementById('score');
        const streakSpan = document.getElementById('streak');
        const timerSpan = document.getElementById('timer');
        const currentQuestionSpan = document.getElementById('current-question');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const restartBtn = document.getElementById('restart-btn');
        const startBtn = document.getElementById('start-btn');
        const downloadBtn = document.getElementById('download-btn');
        const shareBtn = document.getElementById('share-btn');
        const playerNameInput = document.getElementById('player-name');
        const displayPlayerName = document.getElementById('display-player-name');
        const endPlayerName = document.getElementById('end-player-name');
        const cardPlayerName = document.getElementById('card-player-name');
        const percentageText = document.getElementById('percentage-text');
        const percentageCircle = document.getElementById('percentage-circle');
        const iqLevel = document.getElementById('iq-level');
        const cardMessage = document.getElementById('card-message');
        const cardDate = document.getElementById('card-date');
        const cardDifficulty = document.getElementById('card-difficulty');
        const progressBar = document.getElementById('progress');
        const resultsCard = document.getElementById('results-card');
        const statQuestions = document.getElementById('stat-questions');
        const statTime = document.getElementById('stat-time');
        const statStreak = document.getElementById('stat-streak');

        // Quiz settings elements
        const questionOptions = document.querySelectorAll('.setting-option[data-questions]');
        const difficultyOptions = document.querySelectorAll('.setting-option[data-difficulty]');

        // Set up quiz settings selection
        questionOptions.forEach(option => {
            option.addEventListener('click', () => {
                questionOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                quizSettings.questionCount = parseInt(option.dataset.questions);
            });
        });

        difficultyOptions.forEach(option => {
            option.addEventListener('click', () => {
                difficultyOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                quizSettings.difficulty = option.dataset.difficulty;
                quizSettings.timePerQuestion = parseInt(option.dataset.time);
            });
        });

        // Start game button
        startBtn.onclick = function() {
            playerName = playerNameInput.value.trim();
            if (playerName === "") {
                playerName = "PLAYER";
            }
            
            displayPlayerName.textContent = playerName.toUpperCase();
            startScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            initGame();
        };

        // Initialize game with random questions
        function initGame() {
            // Reset game state
            currentQuestion = 0;
            correctAnswers = 0;
            streak = 0;
            maxStreak = 0;
            scoreSpan.textContent = "0";
            streakSpan.textContent = streak;
            
            // Set time per question based on difficulty
            timeLeft = quizSettings.timePerQuestion;
            
            // Select random questions
            questions = getRandomQuestions(allQuestions, quizSettings.questionCount);
            totalQuestionsSpan.textContent = quizSettings.questionCount;
            
            loadQuestion();
        }

        // Get random questions from the pool
        function getRandomQuestions(questionPool, count) {
            // Make a copy of the array
            const shuffled = [...questionPool];
            // Fisher-Yates shuffle algorithm with better randomization
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            // Return the first 'count' questions
            return shuffled.slice(0, count);
        }

        // Load question
        function loadQuestion() {
            const question = questions[currentQuestion];
            questionText.textContent = question.text;
            currentQuestionSpan.textContent = currentQuestion + 1;
            
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option';
                button.textContent = option.text;
                button.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(button);
            });
            
            explanationDiv.style.display = 'none';
            timeLeft = quizSettings.timePerQuestion;
            updateTimerDisplay();
            startTimer();
            
            // Update progress bar
            progressBar.style.width = `${(currentQuestion / questions.length) * 100}%`;
        }

        // Timer functions
        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeOut();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerText = timerSpan.querySelector('span');
            timerText.textContent = timeLeft;
            
            if (timeLeft <= 5) {
                timerSpan.style.color = '#ff6b6b';
            } else {
                timerSpan.style.color = '#fff';
            }
        }

        function timeOut() {
            const question = questions[currentQuestion];
            const correctIndex = question.options.findIndex(opt => opt.correct);
            
            // Highlight correct answer
            const optionButtons = optionsContainer.querySelectorAll('.option');
            optionButtons[correctIndex].classList.add('correct-answer');
            
            // Show explanation
            explanationDiv.textContent = "Time's up! " + question.explanation;
            explanationDiv.style.display = 'block';
            
            streak = 0;
            streakSpan.textContent = streak;
            gameActive = false;
            
            setTimeout(nextQuestion, 2000);
        }

        // Answer selection
        function selectAnswer(selectedIndex) {
            if (!gameActive) return;
            
            gameActive = false;
            clearInterval(timer);
            
            const question = questions[currentQuestion];
            const selectedOption = question.options[selectedIndex];
            const isCorrect = selectedOption.correct;
            const correctIndex = question.options.findIndex(opt => opt.correct);
            
            // Highlight selected answer
            const optionButtons = optionsContainer.querySelectorAll('.option');
            optionButtons[selectedIndex].classList.add(isCorrect ? 'correct' : 'incorrect');
            
            // Highlight correct answer if wrong was selected
            if (!isCorrect) {
                optionButtons[correctIndex].classList.add('correct-answer');
            }
            
            // Show explanation
            explanationDiv.textContent = isCorrect 
                ? "Correct! " + question.explanation
                : "Incorrect. " + question.explanation;
            explanationDiv.style.display = 'block';
            
            // Update score and streak
            if (isCorrect) {
                correctAnswers++;
                streak++;
                if (streak > maxStreak) {
                    maxStreak = streak;
                }
            } else {
                streak = 0;
            }
            
            // Update score display
            const percentage = Math.round((correctAnswers / (currentQuestion + 1)) * 100);
            scoreSpan.textContent = percentage;
            
            streakSpan.textContent = streak;
            
            // Move to next question
            setTimeout(nextQuestion, 2000);
        }

        // Next question or end game
        function nextQuestion() {
            currentQuestion++;
            gameActive = true;
            
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                endGame();
            }
        }

        // End game
        function endGame() {
            gameScreen.style.display = 'none';
            gameOverScreen.style.display = 'block';
            endPlayerName.textContent = playerName.toUpperCase();
            
            // Calculate final percentage
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            
            // Prepare results card
            cardPlayerName.textContent = playerName.toUpperCase();
            
            // Update percentage circle
            percentageText.textContent = percentage;
            percentageCircle.style.setProperty('--percentage', `${percentage}%`);
            
            // Display difficulty level
            const difficultyText = quizSettings.difficulty.charAt(0).toUpperCase() + quizSettings.difficulty.slice(1);
            cardDifficulty.textContent = `${difficultyText} Level â€¢ ${quizSettings.questionCount} Questions`;
            
            // Set stats
            statQuestions.textContent = quizSettings.questionCount;
            statTime.textContent = `${quizSettings.timePerQuestion}s`;
            statStreak.textContent = maxStreak;
            
            const today = new Date();
            cardDate.textContent = today.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Set IQ level and message based on score
            if (percentage >= 80) {
                iqLevel.textContent = "HIGH INTUITION IQ";
                iqLevel.className = "iq-level high";
                cardMessage.textContent = "Your intuition is exceptionally sharp. You have a natural ability to sense the right answers before you know them. Trust your gut - it's clearly well-developed!";
            } else if (percentage >= 50) {
                iqLevel.textContent = "MID INTUITION IQ";
                iqLevel.className = "iq-level mid";
                cardMessage.textContent = "Your intuition is developing well. With more practice, you can hone your gut feelings to be more accurate. Pay attention to when your first instinct is right.";
            } else {
                iqLevel.textContent = "LOW INTUITION IQ";
                iqLevel.className = "iq-level low";
                cardMessage.textContent = "Your intuition needs more training. Pay attention to your first instincts and trust them more often. Practice will help you distinguish between random guesses and true intuition.";
            }
            
            resultsCard.style.display = 'block';
        }

        // Restart game
        restartBtn.onclick = function() {
            currentQuestion = 0;
            correctAnswers = 0;
            streak = 0;
            maxStreak = 0;
            scoreSpan.textContent = "0";
            streakSpan.textContent = streak;
            gameOverScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            initGame();
        };

        // Enhanced Download Function
        downloadBtn.onclick = function() {
            // Calculate percentage
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            
            // Update the download card content
            document.getElementById('download-player-name').textContent = playerName.toUpperCase();
            document.getElementById('download-percentage-text').textContent = percentage;
            document.getElementById('download-percentage-circle').style.setProperty('--percentage', `${percentage}%`);
            
            const difficultyText = quizSettings.difficulty.charAt(0).toUpperCase() + quizSettings.difficulty.slice(1);
            document.getElementById('download-difficulty').textContent = `${difficultyText} Level â€¢ ${quizSettings.questionCount} Questions`;
            
            document.getElementById('download-stat-questions').textContent = quizSettings.questionCount;
            document.getElementById('download-stat-time').textContent = `${quizSettings.timePerQuestion}s`;
            document.getElementById('download-stat-streak').textContent = maxStreak;
            
            const today = new Date();
            document.getElementById('download-date').textContent = today.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            
            // Set IQ level and message based on score
            const iqLevelElement = document.getElementById('download-iq-level');
            const cardMessageElement = document.getElementById('download-card-message');
            
            if (percentage >= 80) {
                iqLevelElement.textContent = "HIGH INTUITION IQ";
                iqLevelElement.className = "iq-level high";
                cardMessageElement.textContent = "Your intuition is exceptionally sharp. You have a natural ability to sense the right answers before you know them. Trust your gut - it's clearly well-developed!";
            } else if (percentage >= 50) {
                iqLevelElement.textContent = "MID INTUITION IQ";
                iqLevelElement.className = "iq-level mid";
                cardMessageElement.textContent = "Your intuition is developing well. With more practice, you can hone your gut feelings to be more accurate. Pay attention to when your first instinct is right.";
            } else {
                iqLevelElement.textContent = "LOW INTUITION IQ";
                iqLevelElement.className = "iq-level low";
                cardMessageElement.textContent = "Your intuition needs more training. Pay attention to your first instincts and trust them more often. Practice will help you distinguish between random guesses and true intuition.";
            }
            
            // Generate the image with high quality settings
            const downloadCard = document.getElementById('download-card');
            
            // Temporarily position the card for capture
            const originalPosition = downloadCard.style.position;
            const originalVisibility = downloadCard.style.visibility;
            downloadCard.style.position = 'absolute';
            downloadCard.style.visibility = 'visible';
            
            html2canvas(downloadCard, {
                scale: 3, // Higher scale for better quality
                backgroundColor: null,
                logging: true,
                useCORS: true,
                width: 800,
                height: 450,
                windowWidth: 800,
                windowHeight: 450
            }).then(canvas => {
                // Restore original styles
                downloadCard.style.position = originalPosition;
                downloadCard.style.visibility = originalVisibility;
                
                const link = document.createElement('a');
                link.download = `intuition-iq-${playerName}-${percentage}.png`;
                link.href = canvas.toDataURL('image/png');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }).catch(err => {
                console.error('Error generating image:', err);
                // Restore original styles even if error occurs
                downloadCard.style.position = originalPosition;
                downloadCard.style.visibility = originalVisibility;
            });
        };

        // Share to X (Twitter)
        shareBtn.onclick = function() {
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            const shareText = `I scored ${percentage}% on the Intuition IQ Quiz (${quizSettings.difficulty} level)!\n\n"${cardMessage.textContent}"\n\nTest your intuition knowledge: ${window.location.href}`;
            const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;
            window.open(shareUrl, '_blank', 'width=550,height=420');
        };

        // Allow pressing Enter to start game
        playerNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startBtn.click();
            }
        });
    </script>
</body>
</html>
